{"version":3,"sources":["../../src/pages/post-details/post-details.module.ts","../../src/pipes/sanitize-html/sanitize-html.module.ts","../../src/pipes/sanitize-html/sanitize-html.ts","../../src/pages/post-details/post-details.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAyC;AACO;AACM;AACL;AACmC;AAepF;IAAA;IAAoC,CAAC;IAAxB,qBAAqB;QAbjC,+DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,sEAAe;aAChB;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,sEAAe,CAAC;gBACzC,4EAAe,CAAC,QAAQ,EAAE;gBAC1B,qGAAkB;aACnB;YACD,OAAO,EAAE;gBACP,sEAAe;aAChB;SACF,CAAC;OACW,qBAAqB,CAAG;IAAD,4BAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;ACnBO;AACM;AAM/C;IAAA;IAAkC,CAAC;IAAtB,kBAAkB;QAJ9B,+DAAQ,CAAC;YACR,YAAY,EAAE,CAAC,oEAAY,CAAC;YAC5B,OAAO,EAAE,CAAC,oEAAY,CAAC;SACxB,CAAC;OACW,kBAAkB,CAAI;IAAD,yBAAC;CAAA;AAAJ;;;;;;;;;;;;;;;;;;;;;ACPqB;AACa;AAKjE;IAEG,sBAAmB,UAAwB;QAAxB,eAAU,GAAV,UAAU,CAAc;IAAE,CAAC;IAE9C,gCAAS,GAAT,UAAU,CAAS;QAChB,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC;IACrD,CAAC;IANS,YAAY;QAHxB,2DAAI,CAAC;YACF,IAAI,EAAE,cAAc;SACvB,CAAC;yCAGgC,+EAAY;OAFjC,YAAY,CAOxB;IAAD,mBAAC;CAAA;AAPwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACN2E;AAC5B;AACf;AACI;AAE0B;AAClC;AACU;AACE;AACG;AACW;AAO/E;IAOE,yBACS,GAAkB,EAClB,SAAoB,EACpB,SAAuB,EACvB,SAA0B,EAC1B,QAAkB,EAClB,UAAsB,EACtB,QAAwB,EACxB,QAAkB,EACjB,aAA4B,EAC5B,WAAwB,EACxB,YAA0B,EAC1B,EAAoB,EACpB,UAAsB,EACvB,oBAA0C,EAC1C,UAAsB;QAf/B,iBAsCC;QArCQ,QAAG,GAAH,GAAG,CAAe;QAClB,cAAS,GAAT,SAAS,CAAW;QACpB,cAAS,GAAT,SAAS,CAAc;QACvB,cAAS,GAAT,SAAS,CAAiB;QAC1B,aAAQ,GAAR,QAAQ,CAAU;QAClB,eAAU,GAAV,UAAU,CAAY;QACtB,aAAQ,GAAR,QAAQ,CAAgB;QACxB,aAAQ,GAAR,QAAQ,CAAU;QACjB,kBAAa,GAAb,aAAa,CAAe;QAC5B,gBAAW,GAAX,WAAW,CAAa;QACxB,iBAAY,GAAZ,YAAY,CAAc;QAC1B,OAAE,GAAF,EAAE,CAAkB;QACpB,eAAU,GAAV,UAAU,CAAY;QACvB,yBAAoB,GAApB,oBAAoB,CAAsB;QAC1C,eAAU,GAAV,UAAU,CAAY;QAlB/B,YAAO,GAAY,KAAK,CAAC;QACzB,cAAS,GAAY,IAAI,CAAC;QAmBxB,8EAA8E;QAC9E,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAE/C,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC,uBAAuB,CAC9C,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,QAAQ,CACnC,CAAC;QAEF,iDAAiD;QACjD,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC,MAAM,CAC/B,UAAU,CAAC,aAAa,EACxB,OAAO,EACP,eAAK;YACH,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;gBACjC,KAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;YACrC,CAAC;QACH,CAAC,CACF,CAAC;QAEF,EAAE,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YAC3B,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC9C,CAAC;IACH,CAAC;IAED,kCAAQ,GAAR;QACE,IAAI,MAAM,GAAQ,YAAY,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QACjD,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACX,EAAE,CAAC,CAAC,OAAO,MAAM,IAAI,QAAQ,CAAC;gBAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;YAE3D,EAAE,CAAC,CACD,MAAM;gBACN,MAAM,CAAC,IAAI;gBACX,MAAM,CAAC,IAAI,CAAC,KAAK;gBACjB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI;gBACtB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IACzB,CAAC;gBACC,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC;QAChE,CAAC;IACH,CAAC;IAED,kCAAQ,GAAR,UAAS,EAAE,EAAE,KAAM;QACjB,IAAI,MAAM,GAAG,QAAQ,CAAC;QAEtB,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,IAAI,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAC5C,EAAE,CAAC,CAAC,EAAE,CAAC,SAAS,IAAI,EAAE,CAAC,SAAS,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;gBAAC,MAAM,GAAG,SAAS,CAAC;YAExE,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;QAC/B,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CACR,EAAE,CAAC,OAAO,IAAI,KAAK;YACnB,EAAE,CAAC,UAAU,CAAC,IAAI;YAClB,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CACxC,CAAC,CAAC,CAAC;YACD,iDAAiD;YACjD,EAAE,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,SAAS,IAAI,EAAE,CAAC,UAAU,CAAC,SAAS,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;gBACxE,MAAM,GAAG,SAAS,CAAC;YAErB,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;QAC1C,CAAC;IACH,CAAC;IAED;;;;OAIG;IACH,yCAAe,GAAf,UAAgB,KAAK;QACnB,IAAI,EAAE,GAAgB,KAAK,CAAC,MAAM,CAAC;QACnC,IAAI,SAAS,GAAG,EAAE,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC;QAChD,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;YACf,uBAAuB;YACvB,SAAS,GAAG,EAAE,CAAC,aAAa,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC;QAC5D,CAAC;QAED,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;YACd,IAAI,QAAQ,GAAG,IAAI,CAAC;YAEpB,IAAI,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;YAEnE,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;gBACf,QAAQ,GAAG,KAAK,CAAC;YACnB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;gBAEhE,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;oBACf,QAAQ,GAAG,MAAM,CAAC;gBACpB,CAAC;YACH,CAAC;YAED,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACb,IAAI,SAAS,GAAG,IAAI,CAAC;gBAErB,KAAK,CAAC,cAAc,EAAE,CAAC;gBACvB,KAAK,CAAC,eAAe,EAAE,CAAC;gBAExB,EAAE,CAAC,CAAC,QAAQ,IAAI,KAAK,CAAC,CAAC,CAAC;oBACtB,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gBAChD,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gBAChD,CAAC;gBAED,IAAI,GAAG,GAAG;oBACR,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC,SAAS,CAAC;oBACnD,SAAS,EAAE,SAAS;oBACpB,GAAG,EACD,IAAI,CAAC,QAAQ,CAAC,KAAK,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;wBAC5C,CAAC,CAAC,EAAE,SAAS,EAAE,MAAM,EAAE;wBACvB,CAAC,CAAC,EAAE;iBACT,CAAC;gBAEF,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;oBACjD,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,SAAS,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;gBAClD,CAAC;gBAED,MAAM,CAAC,IAAI,CAAC;YACd,CAAC;QACH,CAAC;QAED,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IAED,0CAAgB,GAAhB;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,IAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;YACtD,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;YACpC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACtB,CAAC;QAED,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC;YAC9C,IAAI,CAAC,EAAE,CAAC,eAAe,CACrB,iBAAiB,EACjB,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CACjC,CAAC;IACN,CAAC;IAED,oCAAU,GAAV,UAAW,GAAG,EAAE,GAAU;QAAV,gCAAU;QACxB,IAAI,IAAI,GAAG,EAAE,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC;QAEvC,IAAI,OAAO,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;QAEnC,EAAE,CAAC,CAAC,OAAO,KAAK,KAAK,CAAC,CAAC,CAAC;YACtB,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;QACtB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QAC9C,CAAC;IACH,CAAC;IAED,mCAAS,GAAT,UAAU,GAAG;QACX,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC/B,CAAC;IAED,+BAAK,GAAL;QACE,IAAI,CAAC,aAAa,CAAC,KAAK,CACtB,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,QAAQ,EAChC,IAAI,EACJ,IAAI,EACJ,IAAI,CAAC,YAAY,CAAC,IAAI,CACvB;aACE,IAAI,CAAC;YACJ,gCAAgC;QAClC,CAAC,CAAC;aACD,KAAK,CAAC;YACL,oCAAoC;QACtC,CAAC,CAAC,CAAC;IACP,CAAC;IAED,6DAA6D;IAC7D,2CAAiB,GAAjB;QACE,IAAI,GAAG,GAAG,EAAE,CAAC;QAEb,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;YAAC,GAAG,GAAG,EAAE,SAAS,EAAE,SAAS,EAAE,CAAC;QAE5D,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IACpB,CAAC;IApMU,eAAe;QAJ3B,gEAAS,CAAC;YACT,WAAW,EAAE,WAAmB;WACR;SACzB,CAAC;6EAS2B;YACP,+EAAS;YACT,sEAAY;YACZ,wDAAe;YAChB,yDAAQ;YACN,qEAAU;YACZ,gEAAc;YACd,mFAAQ;YACF,mFAAa;YACf,qFAAW;YACV,gGAAY;YACtB,iFAAgB;YACR,wGAAU;YACD,wEAAoB;YAC9B,UAAU;OAtBpB,eAAe,CAqM3B;IAAD,CAAC;AAAA;SArMY,eAAe,gB","file":"6.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { PostDetailsPage } from './post-details';\nimport { SanitizeHtmlModule } from '../../pipes/sanitize-html/sanitize-html.module';\n\n@NgModule({\n  declarations: [\n    PostDetailsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(PostDetailsPage),\n    TranslateModule.forChild(),\n    SanitizeHtmlModule\n  ],\n  exports: [\n    PostDetailsPage\n  ]\n})\nexport class PostDetailsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/post-details/post-details.module.ts","import { NgModule } from '@angular/core';\nimport { SanitizeHtml } from './sanitize-html';\n\n@NgModule({\n  declarations: [SanitizeHtml],\n  exports: [SanitizeHtml]\n})\nexport class SanitizeHtmlModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/sanitize-html/sanitize-html.module.ts","import { Pipe, PipeTransform } from '@angular/core';\nimport {DomSanitizer, SafeHtml} from '@angular/platform-browser';\n\n@Pipe({\n    name: 'sanitizeHtml'\n})\nexport class SanitizeHtml implements PipeTransform  {\n\n   constructor(public _sanitizer: DomSanitizer){}  \n\n   transform(v: string) : SafeHtml {\n      return this._sanitizer.bypassSecurityTrustHtml(v); \n   } \n} \n\n\n// WEBPACK FOOTER //\n// ./src/pipes/sanitize-html/sanitize-html.ts","import {\n  NavController,\n  NavParams,\n  ModalController,\n  Platform,\n  ViewController,\n  IonicPage\n} from \"ionic-angular\";\nimport { Component, Renderer, ElementRef, OnInit } from \"@angular/core\";\nimport { DomSanitizer } from \"@angular/platform-browser\";\nimport { SocialSharing } from \"@ionic-native/social-sharing\";\n\nimport { StreamingMediaPlayer } from \"../../providers/streaming-media/streaming-media\";\nimport { PdfService } from \"../../providers/pdf/pdf\";\nimport { VideoUtils } from \"../../providers/video/video-utils\";\nimport { MenuService } from \"../../providers/menus/menu.service\";\nimport { LoginService } from \"../../providers/logins/login.service\";\nimport { AnalyticsService } from \"../../providers/analytics/analytics.service\";\n\n@IonicPage()\n@Component({\n  templateUrl: \"post-details.html\",\n  selector: \"post-details\"\n})\nexport class PostDetailsPage implements OnInit {\n  selectedItem: any;\n  content: any;\n  listenFunc: Function;\n  rtlBack: boolean = false;\n  showShare: boolean = true;\n\n  constructor(\n    public nav: NavController,\n    public navParams: NavParams,\n    public sanitizer: DomSanitizer,\n    public modalCtrl: ModalController,\n    public renderer: Renderer,\n    public elementRef: ElementRef,\n    public viewCtrl: ViewController,\n    public platform: Platform,\n    private SocialSharing: SocialSharing,\n    private menuservice: MenuService,\n    private loginservice: LoginService,\n    private ga: AnalyticsService,\n    private videoUtils: VideoUtils,\n    public streamingMediaPlayer: StreamingMediaPlayer,\n    public pdfService: PdfService\n  ) {\n    // If we navigated to this page, we will have an item available as a nav param\n    this.selectedItem = this.navParams.get(\"item\");\n\n    this.content = sanitizer.bypassSecurityTrustHtml(\n      this.selectedItem.content.rendered\n    );\n\n    // Listen for link clicks, open in in app browser\n    this.listenFunc = renderer.listen(\n      elementRef.nativeElement,\n      \"click\",\n      event => {\n        if (!this.hasPushPageAttr(event)) {\n          this.iabLinks(event.target, event);\n        }\n      }\n    );\n\n    if (platform.is(\"android\")) {\n      this.videoUtils.killVideos(this.elementRef);\n    }\n  }\n\n  ngOnInit() {\n    let myappp: any = localStorage.getItem(\"myappp\");\n    if (myappp) {\n      if (typeof myappp == \"string\") myappp = JSON.parse(myappp);\n\n      if (\n        myappp &&\n        myappp.meta &&\n        myappp.meta.share &&\n        myappp.meta.share.icon &&\n        myappp.meta.share.icon.hide\n      )\n        this.showShare = myappp.meta.share.icon.hide ? false : true;\n    }\n  }\n\n  iabLinks(el, event?) {\n    let target = \"_blank\";\n\n    if (el.href && el.href.indexOf(\"http\") >= 0) {\n      if (el.classList && el.classList.contains(\"system\")) target = \"_system\";\n\n      event.preventDefault();\n      window.open(el.href, target);\n    } else if (\n      el.tagName == \"IMG\" &&\n      el.parentNode.href &&\n      el.parentNode.href.indexOf(\"http\") >= 0\n    ) {\n      // handle image tags that have link as the parent\n      if (el.parentNode.classList && el.parentNode.classList.contains(\"system\"))\n        target = \"_system\";\n\n      event.preventDefault();\n      window.open(el.parentNode.href, target);\n    }\n  }\n\n  /**\n   * Look for push-page or open-page on the target\n   *\n   * @param event click event on a link\n   */\n  hasPushPageAttr(event) {\n    let el: HTMLElement = event.target;\n    let page_slug = el.getAttribute(\"data-apppage\");\n    if (!page_slug) {\n      // IMG might be wrapped\n      page_slug = el.parentElement.getAttribute(\"data-apppage\");\n    }\n\n    if (page_slug) {\n      let menuType = null;\n\n      let page_index = this.menuservice.getIndexBySlug(page_slug, \"tab\");\n\n      if (page_index) {\n        menuType = \"tab\";\n      } else {\n        page_index = this.menuservice.getIndexBySlug(page_slug, \"side\");\n\n        if (page_index) {\n          menuType = \"side\";\n        }\n      }\n\n      if (menuType) {\n        let navParams = null;\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        if (menuType == \"tab\") {\n          navParams = this.menuservice.tabs[page_index];\n        } else {\n          navParams = this.menuservice.menu[page_index];\n        }\n\n        let nav = {\n          root: this.menuservice.getPageModuleName(navParams),\n          navParams: navParams,\n          opt:\n            this.platform.isRTL && this.platform.is(\"ios\")\n              ? { direction: \"back\" }\n              : {}\n        };\n\n        if (!this.loginservice.yieldLogin(nav.navParams)) {\n          this.nav.push(nav.root, nav.navParams, nav.opt);\n        }\n\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  ionViewWillEnter() {\n    if (this.platform.isRTL && this.viewCtrl.enableBack()) {\n      this.viewCtrl.showBackButton(false);\n      this.rtlBack = true;\n    }\n\n    if (this.selectedItem && this.selectedItem.link)\n      this.ga.trackScreenView(\n        \"PostDetailsPage\",\n        \"link/\" + this.selectedItem.link\n      );\n  }\n\n  mediaModal(src, img = null) {\n    let data = { source: src, image: img };\n\n    let fileExt = src.split(\".\").pop();\n\n    if (fileExt === \"pdf\") {\n      this.handlePDF(src);\n    } else {\n      this.streamingMediaPlayer.start(data, null);\n    }\n  }\n\n  handlePDF(src) {\n    this.pdfService.openPdf(src);\n  }\n\n  share() {\n    this.SocialSharing.share(\n      this.selectedItem.title.rendered,\n      null,\n      null,\n      this.selectedItem.link\n    )\n      .then(() => {\n        // Sharing via email is possible\n      })\n      .catch(() => {\n        // Sharing via email is not possible\n      });\n  }\n\n  // changes the back button transition direction if app is RTL\n  backRtlTransition() {\n    let obj = {};\n\n    if (this.platform.is(\"ios\")) obj = { direction: \"forward\" };\n\n    this.nav.pop(obj);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/post-details/post-details.ts"],"sourceRoot":""}