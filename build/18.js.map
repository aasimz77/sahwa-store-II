{"version":3,"sources":["../../src/pages/edit-profile-modal/edit-profile-modal.module.ts","../../src/pages/edit-profile-modal/edit-profile-modal.ts"],"names":[],"mappings":"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","file":"18.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { EditProfileModal } from './edit-profile-modal';\n\n@NgModule({\n  declarations: [\n    EditProfileModal,\n  ],\n  imports: [\n    IonicPageModule.forChild(EditProfileModal),\n    TranslateModule.forChild()\n  ],\n})\nexport class EditProfileModalModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/edit-profile-modal/edit-profile-modal.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, Platform, ViewController, AlertController, LoadingController } from 'ionic-angular';\nimport { Storage } from '@ionic/storage';\nimport { Device } from '@ionic-native/device';\nimport { ActionSheet, ActionSheetOptions } from '@ionic-native/action-sheet';\nimport { TranslateService } from '@ngx-translate/core';\nimport { LoginService } from '../../providers/logins/login.service';\nimport { BpProvider } from '../../providers/buddypress/bp-provider';\n\nexport interface Field {\n  id: number,\n  name: string,\n  value: string,\n  type: string,\n  loading: boolean,\n  order: number\n};\n\n@IonicPage()\n@Component({\n  selector: 'page-edit-profile-modal',\n  templateUrl: 'edit-profile-modal.html',\n})\nexport class EditProfileModal {\n\n  public profileFields: Array<Field>;\n  public profileAvatar: string;\n  public customClasses: string;\n  private login_data: any;\n\n  constructor(\n    public platform: Platform,\n    public viewCtrl: ViewController,\n    public alertCtrl: AlertController,\n    public loadingCtrl: LoadingController,\n    public device: Device,\n    public actionSheet: ActionSheet,\n    public storage: Storage,\n    public translate: TranslateService,\n    public loginservice: LoginService,\n    public bpProvider: BpProvider) {\n\n    this.profileFields = [];\n    this.profileAvatar = String(this.loginservice.user.avatar);\n    this._doIphoneX();\n  }\n\n  /**\n   * Tasks you want to do every time you enter in the view (setting event listeners, updating a table, etc.)\n   */\n  public ionViewWillEnter(): void {\n    this._getLoginData();\n  }\n\n  /**\n   * Get the login data from the storage\n   * @TODO consider putting this on a provider to be used as a service\n   */\n  private _getLoginData(): void {\n    this.storage.get('user_login')\n      .then(login_data => {\n        if (login_data) {\n          this.login_data = login_data;\n          this._getAllFields();\n        }\n      })\n      .catch(error => {\n        console.error(error);\n      });\n  }\n\n  /**\n   * Gets profile fields from API\n   */\n  private _getAllFields(): void {\n    const loading = this.loadingCtrl.create({\n      showBackdrop: false,\n      dismissOnPageChange: false\n    });\n    loading.present();\n\n    this.bpProvider.getFields(this.login_data)\n      .then(response => {\n        let fields: Array<any> = response.json();\n        fields.forEach(field => {\n          // @TODO consider grouping fields as in buddypress (Base, Single Fields, Multi Fields)\n          this.profileFields.push({\n            id: field.id,\n            name: field.name,\n            value: field.data.value,\n            type: field.type,\n            loading: false,\n            order: field.field_order\n          });\n        });\n\n        // Sort profileFields by field_order\n        this.profileFields.sort(function (field1: Field, field2: Field) {\n          return field1.order - field2.order; // Ascending\n        });\n\n        loading.dismiss();\n      })\n      .catch(error => {\n        console.log(error);\n        loading.dismiss();\n      });\n  }\n\n  /**\n   * Changes custom class as a workaround for iphonex status bar\n   */\n  private _doIphoneX(): void {\n    if (this.device && this.device.model) {\n      let model = this.device.model.toLowerCase();\n      if (model.indexOf('iphone10') >= 0) {\n        if (this.platform.isLandscape()) {\n          this.customClasses = 'iphoneX-landscape'\n        } else {\n          this.customClasses = 'iphoneX-portrait'\n        }\n      }\n    }\n  }\n\n  /**\n   * Dismissed the modal\n   */\n  public dismiss(): void {\n    this.viewCtrl.dismiss();\n  }\n\n  /**\n   * Edits the profile's avatar from camera or library\n   */\n  public editAvatar(): void {\n    const actionSheetOptions: ActionSheetOptions = {\n      title: this.translate.instant('Choose an image'),\n      buttonLabels: [\n        this.translate.instant('Take Photo'),\n        this.translate.instant('Photo Library')\n      ],\n      addCancelButtonWithLabel: this.translate.instant('Cancel'),\n      androidTheme: 5,\n      androidEnableCancelButton: true,\n      destructiveButtonLast: true\n    };\n\n    this.actionSheet.show(actionSheetOptions)\n      .then((buttonIndex: number) => {\n        if (buttonIndex === 1) {\n          this.bpProvider.doCamera('camera')\n            .then(image => {\n              let uploadedImage = (<string>image);\n              this._updateAvatarToApi(uploadedImage);\n            })\n            .catch(error => {\n              console.error(error);\n            });\n        } else if (buttonIndex === 2) {\n          this.bpProvider.doCamera('library')\n            .then(image => {\n              let uploadedImage = (<string>image);\n              this._updateAvatarToApi(uploadedImage);\n            })\n            .catch(error => {\n              console.error(error);\n            });\n        }\n      })\n      .catch(error => {\n        console.error(error);\n      });\n  }\n\n  /**\n   * Opens the right alert controller to\n   * @param {Field} field\n   */\n  public editFieldValue(field: Field): void {\n    let fieldType = field.type;\n    switch (fieldType) {\n      case 'textbox': {\n        this._editTextField(field, 'text');\n        break;\n      }\n\n      case 'telephone': {\n        this._editTextField(field, 'tel');\n        break;\n      }\n\n      case 'number': {\n        this._editTextField(field, 'number');\n        break;\n      }\n\n      case 'url': {\n        this._editTextField(field, 'url');\n        break;\n      }\n\n      /*\n      case 'radio': {\n        // https://ionicframework.com/docs/v3/components/#alert-radio\n        break;\n      }\n\n      case 'checkbox': {\n        // https://ionicframework.com/docs/v3/components/#alert-checkbox\n        break;\n      }\n\n      case 'datebox': {\n        // https://ionicframework.com/docs/v3/native/date-picker/\n        // or\n        // https://ionicframework.com/docs/v3/components/#datetime\n        break;\n      }\n      */\n\n      default: {\n        this._editFieldNotAvailable();\n        break;\n      }\n    }\n  }\n\n  /**\n   * Shows an alert to edit text fields\n   * @param {Field} field\n   * @param {string} fieldType\n   */\n  private _editTextField(field: Field, fieldType: string): void {\n    const prompt = this.alertCtrl.create({\n      title: this.translate.instant('Edit field'),\n      subTitle: field.name,\n      inputs: [\n        {\n          name: 'current_field_name',\n          placeholder: field.name,\n          type: fieldType,\n          value: field.value\n        },\n      ],\n      buttons: [\n        {\n          text: this.translate.instant('Cancel'),\n        },\n        {\n          text: this.translate.instant('Save'),\n          handler: data => {\n            this._updateFieldToApi(field, data.current_field_name);\n          }\n        }\n      ]\n    });\n    prompt.present();\n  }\n\n\n  /**\n   * Shows an alert that field edit is not available\n   */\n  private _editFieldNotAvailable(): void {\n    const alert = this.alertCtrl.create({\n      title: this.translate.instant('Edit field'),\n      subTitle: this.translate.instant('Editing this field is not available yet.'),\n      buttons: ['OK']\n    });\n    alert.present();\n  }\n\n  /**\n   * Updates the current field with the new value to the API\n   * @param {Field} field\n   * @param {string} updatedFieldValue\n   */\n  private _updateFieldToApi(field: Field, updatedFieldValue: string): void {\n    let fieldIndex: number = this.profileFields.findIndex(currentField => currentField.id === field.id);\n    this.profileFields[fieldIndex].loading = true;\n    this.bpProvider.updateProfileField(this.login_data, this.profileFields[fieldIndex].id, updatedFieldValue)\n      .then(() => {\n        this.profileFields[fieldIndex].value = updatedFieldValue;\n        this.profileFields[fieldIndex].loading = false;\n      })\n      .catch(error => {\n        console.log(error);\n        this._handleErrorFromApi();\n        this.profileFields[fieldIndex].loading = false;\n      });\n  }\n\n  /**\n   * Updates the new pofile's avatar to the API\n   * @param {string} profileAvatar\n   */\n  private _updateAvatarToApi(profileAvatar: string): void {\n    const loading = this.loadingCtrl.create({\n      showBackdrop: false,\n      dismissOnPageChange: false\n    });\n    loading.present();\n    \n    this.bpProvider.updateProfileAvatar(this.login_data, profileAvatar)\n      .then(avatar => {\n        this.profileAvatar = avatar[0].full;\n        this.loginservice.user.avatar = avatar[0].full;\n        this.login_data.avatar = avatar[0].full;\n        this.storage.set('user_login', this.login_data);\n        loading.dismiss();\n      })\n      .catch(error => {\n        console.error(error);\n        loading.dismiss();\n        this._handleErrorFromApi();\n      });\n  }\n\n  /**\n   * Shows an alert if the update to the API fails\n   */\n  private _handleErrorFromApi(): void {\n    const alert = this.alertCtrl.create({\n      title: this.translate.instant('Error'),\n      subTitle: this.translate.instant('Could not update your profile. Please try again.'),\n      buttons: ['OK']\n    });\n    alert.present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/edit-profile-modal/edit-profile-modal.ts"],"sourceRoot":""}